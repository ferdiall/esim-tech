{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}

<h1 style="margin-bottom:20px; font-size:22px; color:#1f4e6e;">YÃ¶netim Paneli</h1>

<!-- DASHBOARD INFO CARDS -->
<div style="
    display: flex;
    gap: 20px;
    margin-bottom: 30px;
    flex-wrap: wrap;
">

    <!-- Toplam ESIM -->
    <div style="
        flex: 1;
        min-width: 220px;
        background:white;
        padding:20px;
        border-radius:16px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
    ">
        <h3 style="color:#1f4e6e;">Toplam eSIM</h3>
        <p style="font-size:32px; font-weight:bold; color:#1f4e6e;">
            {{ total_esim }}
        </p>
    </div>

    <!-- Aktif ESIM -->
    <div style="
        flex: 1;
        min-width: 220px;
        background:white;
        padding:20px;
        border-radius:16px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
    ">
        <h3 style="color:#22c55e;">Aktif eSIM</h3>
        <p style="font-size:32px; font-weight:bold; color:#22c55e;">
            {{ active_count }}
        </p>
    </div>

    <!-- Pasif ESIM -->
    <div style="
        flex: 1;
        min-width: 220px;
        background:white;
        padding:20px;
        border-radius:16px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
    ">
        <h3 style="color:#3b82f6;">Pasif eSIM</h3>
        <p style="font-size:32px; font-weight:bold; color:#3b82f6;">
            {{ passive_count }}
        </p>
    </div>

    <!-- KullanÄ±cÄ± SayÄ±sÄ± -->
    <div style="
        flex: 1;
        min-width: 220px;
        background:white;
        padding:20px;
        border-radius:16px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
    ">
        <h3 style="color:#1f4e6e;">Toplam KullanÄ±cÄ±</h3>
        <p style="font-size:32px; font-weight:bold; color:#1f4e6e;">
            {{ total_users }}
        </p>
    </div>

</div>


<h1 style="margin-bottom:20px; font-size:22px; color:#1f4e6e;">YÃ¶netim Paneli</h1>
<h1 style="margin-bottom:20px; font-size:22px; color:#1f4e6e;">YÃ¶netim Paneli</h1>

<!-- ðŸ“Š DASHBOARD Ä°STATÄ°STÄ°K KARTLARI -->
<div style="display:flex; gap:20px; margin-bottom:30px;">
    
    <!-- TOPLAM ESIM -->
    <div style="
        background:white;
        padding:20px;
        border-radius:14px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
        width:200px;
    ">
        <div style="font-size:14px; color:#1f4e6e; margin-bottom:8px;">Toplam ESIM</div>
        <div style="font-size:28px; font-weight:bold; color:#1f4e6e;">{{ total_esim }}</div>
    </div>

    <!-- AKTÄ°F -->
    <div style="
        background:white;
        padding:20px;
        border-radius:14px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
        width:200px;
    ">
        <div style="font-size:14px; color:#1f4e6e; margin-bottom:8px;">Aktif ESIM</div>
        <div style="font-size:28px; font-weight:bold; color:rgb(34,197,94);">{{ active_count }}</div>
    </div>

    <!-- PASÄ°F -->
    <div style="
        background:white;
        padding:20px;
        border-radius:14px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
        width:200px;
    ">
        <div style="font-size:14px; color:#1f4e6e; margin-bottom:8px;">Pasif ESIM</div>
        <div style="font-size:28px; font-weight:bold; color:rgb(59,130,246);">{{ passive_count }}</div>
    </div>

    <!-- KULLANICI -->
    <div style="
        background:white;
        padding:20px;
        border-radius:14px;
        border:1px solid #e5e7eb;
        box-shadow:0 4px 8px rgba(0,0,0,0.05);
        width:200px;
    ">
        <div style="font-size:14px; color:#1f4e6e; margin-bottom:8px;">Toplam KullanÄ±cÄ±</div>
        <div style="font-size:28px; font-weight:bold; color:#1f4e6e;">{{ total_users }}</div>
    </div>

</div>


<!-- PIE CHART -->
<div style="
    background:white;
    padding:20px;
    border-radius:16px;
    border:1px solid #e5e7eb;
    box-shadow:0 4px 8px rgba(0,0,0,0.05);
    margin-bottom:30px;
    width:400px;
">
    <h2 style="color:#1f4e6e; margin-bottom:15px;">SIM Kart Durum DaÄŸÄ±lÄ±mÄ±</h2>
    <canvas id="statusChart" style="width:100%; height:300px;"></canvas>
</div>

{{ block.super }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    var ctx = document.getElementById('statusChart').getContext('2d');

    var statusChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Aktif', 'Pasif', 'Blokeli'],
            datasets: [{
                data: [
                    {{ active_count }},
                    {{ passive_count }},
                    {{ blocked_count }}
                ],
                backgroundColor: [
                    'rgba(34,197,94,0.7)',    // Aktif (YeÅŸil)
                    'rgba(59,130,246,0.7)',   // Pasif (Mavi)
                    'rgba(239,68,68,0.7)'     // Blokeli (KÄ±rmÄ±zÄ±)
                ],
                borderColor: [
                    'rgba(34,197,94,1)',
                    'rgba(59,130,246,1)',
                    'rgba(239,68,68,1)'
                ],
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: "#1f4e6e",
                        font: { size: 14 }
                    }
                }
            }
        }
    });
});
</script>

{% endblock %}
