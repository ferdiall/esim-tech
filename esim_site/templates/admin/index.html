{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}

<h1 style="margin-bottom:20px; font-size:22px; color:#1f4e6e;">Yönetim Paneli</h1>

<!-- PIE CHART -->
<div style="
    background:white;
    padding:20px;
    border-radius:16px;
    border:1px solid #e5e7eb;
    box-shadow:0 4px 8px rgba(0,0,0,0.05);
    margin-bottom:30px;
    width:400px;
">
    <h2 style="color:#1f4e6e; margin-bottom:15px;">SIM Kart Durum Dağılımı</h2>
    <canvas id="statusChart" style="width:100%; height:300px;"></canvas>
</div>

{{ block.super }}

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    var ctx = document.getElementById('statusChart').getContext('2d');

    var statusChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Aktif', 'Pasif', 'Blokeli'],
            datasets: [{
                data: [
                    {{ active_count }},
                    {{ passive_count }},
                    {{ blocked_count }}
                ],
                backgroundColor: [
                    'rgba(34,197,94,0.7)',    // Aktif (Yeşil)
                    'rgba(59,130,246,0.7)',   // Pasif (Mavi)
                    'rgba(239,68,68,0.7)'     // Blokeli (Kırmızı)
                ],
                borderColor: [
                    'rgba(34,197,94,1)',
                    'rgba(59,130,246,1)',
                    'rgba(239,68,68,1)'
                ],
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: "#1f4e6e",
                        font: { size: 14 }
                    }
                }
            }
        }
    });
});
</script>

{% endblock %}
